---
import Layout from '../../layouts/Layout.astro';
import QuizContainer from '../../components/react/QuizContainer';
import { unidades, obtenerPreguntas, obtenerUnidad } from '../../data';

export function getStaticPaths() {
  return unidades.map(unidad => ({
    params: { unidad: unidad.id }
  }));
}

const { unidad: unidadId } = Astro.params;
const unidad = obtenerUnidad(unidadId as string);
const preguntas = obtenerPreguntas(unidadId as string);

if (!unidad) {
  return Astro.redirect('/404');
}
---

<Layout title={`${unidad.titulo} - Flutter Quiz`} description={unidad.descripcion}>
  <!-- Breadcrumb -->
  <nav class="mb-6">
    <ol class="flex items-center gap-2 text-sm text-slate-400">
      <li><a href="/" class="hover:text-white transition-colors">Inicio</a></li>
      <li class="text-slate-600">/</li>
      <li class={`bg-gradient-to-r ${unidad.color} bg-clip-text text-transparent font-medium`}>
        {unidad.titulo}
      </li>
    </ol>
  </nav>

  <!-- Quiz Info Header -->
  <div class="mb-8 bg-slate-800/30 rounded-2xl p-6 border border-slate-700">
    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
      <div class="flex items-center gap-4">
        <span class="text-4xl">{unidad.icono}</span>
        <div>
          <h1 class={`text-2xl font-bold bg-gradient-to-r ${unidad.color} bg-clip-text text-transparent`}>
            {unidad.titulo}
          </h1>
          <p class="text-slate-400 text-sm mt-1">{unidad.descripcion}</p>
        </div>
      </div>
      <div class="flex flex-wrap gap-2">
        {unidad.temas.map(tema => (
          <span class="px-3 py-1 bg-slate-700/50 rounded-lg text-xs text-slate-300">
            {tema}
          </span>
        ))}
      </div>
    </div>
  </div>

  <!-- Quiz Container (React Component) -->
  <QuizContainer 
    client:load 
    preguntas={preguntas}
    unidadTitulo={unidad.titulo}
    unidadColor={unidad.color}
  />
</Layout>
